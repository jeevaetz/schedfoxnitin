/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * PostInstructionPanel.java
 *
 * Created on Nov 9, 2010, 8:52:59 AM
 */

package rmischedule.schedule;

import com.creamtec.ajaxswing.AjaxSwingConstants;
import com.creamtec.ajaxswing.AjaxSwingManager;
import com.creamtec.ajaxswing.core.AjaxSwingProperties;
import com.creamtec.ajaxswing.core.ClientAgent;
import com.creamtec.ajaxswing.rendering.html.positioned.AjaxPage;
import java.awt.Cursor;
import java.awt.Desktop;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import rmischedule.client.components.Client_Files;
import schedfoxlib.model.util.FileLoader;

/**
 *
 * @author user
 */
public class PostInstructionPanel extends javax.swing.JPanel {

    private String fileName;

    /** Creates new form PostInstructionPanel **/
    public PostInstructionPanel(int fileNumber, String fileName) {
        initComponents();
        this.fileName = fileName;
        if (fileNumber == 1) {
            this.instructLabel.setText("General:");
        } else if (fileNumber >= 2) {
            this.instructLabel.setText("Specific:");
        }
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        instructLabel = new javax.swing.JLabel();
        viewFileBtn = new javax.swing.JButton();

        setMaximumSize(new java.awt.Dimension(32767, 35));
        setMinimumSize(new java.awt.Dimension(106, 35));
        setPreferredSize(new java.awt.Dimension(366, 35));
        setLayout(new javax.swing.BoxLayout(this, javax.swing.BoxLayout.X_AXIS));

        jPanel1.setMaximumSize(new java.awt.Dimension(240, 39));
        jPanel1.setPreferredSize(new java.awt.Dimension(240, 26));
        jPanel1.setLayout(new javax.swing.BoxLayout(jPanel1, javax.swing.BoxLayout.Y_AXIS));

        jPanel2.setMaximumSize(new java.awt.Dimension(32767, 9));
        jPanel2.setMinimumSize(new java.awt.Dimension(10, 8));
        jPanel2.setPreferredSize(new java.awt.Dimension(100, 10));
        jPanel1.add(jPanel2);

        instructLabel.setText("jLabel1");
        instructLabel.setMaximumSize(new java.awt.Dimension(3000, 30));
        instructLabel.setMinimumSize(new java.awt.Dimension(120, 16));
        instructLabel.setPreferredSize(new java.awt.Dimension(120, 16));
        jPanel1.add(instructLabel);

        add(jPanel1);

        viewFileBtn.setText("View");
        viewFileBtn.setMaximumSize(new java.awt.Dimension(80, 29));
        viewFileBtn.setMinimumSize(new java.awt.Dimension(80, 29));
        viewFileBtn.setPreferredSize(new java.awt.Dimension(80, 29));
        viewFileBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                viewFileBtnActionPerformed(evt);
            }
        });
        add(viewFileBtn);
    }// </editor-fold>//GEN-END:initComponents

    private void viewFileBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_viewFileBtnActionPerformed
        //  set cursor

        //  open file via desktop
        try {
            ArrayList<String> fileLocations = new ArrayList<String>();

            Cursor hourglassCursor = new Cursor(Cursor.WAIT_CURSOR);
            setCursor(hourglassCursor);
            fileLocations.add(this.fileName);
            ArrayList<File> fileArray = FileLoader.getFiles(fileLocations);
                
            if (!AjaxSwingManager.isAjaxSwingRunning()) {
                Desktop.getDesktop().edit(fileArray.get(0));
            } else {
                AjaxPage ajaxPage = (AjaxPage) ClientAgent.getCurrentInstance().getHTMLPage();
                //ajaxPage.getAjaxResponse().appendScript("window.open('" + FileLoader.getFileUrl(fileName) + "','_newtab')");

                ajaxPage.getAjaxResponse().appendScript("window.open('" + FileLoader.getFileUrl(fileName) + "','_self')");

            }

        }
        catch (IOException ex)
        {
            Logger.getLogger(Client_Files.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            Cursor normalCursor = new Cursor(Cursor.DEFAULT_CURSOR);
            setCursor(normalCursor);
        }

        
    }//GEN-LAST:event_viewFileBtnActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel instructLabel;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JButton viewFileBtn;
    // End of variables declaration//GEN-END:variables

}
